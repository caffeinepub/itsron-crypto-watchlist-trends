{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T20:25:58.856Z",
  "summary": "Frontend adds a new searchable SymbolPicker and updates AddCryptoDialog and Dashboard to use new watchlist/valid-symbol hooks, but the diff summary does not show the required backend public endpoints (getValidSymbols, addCryptoToWatchlist, getWatchlist) or their auth/error/idempotency behavior being implemented in backend/main.mo.",
  "missing_requirements": [
    {
      "id": "REQ-31",
      "requirement": "Expose the backend coin directory used by the frontend by implementing a `validSymbols` map in `backend/main.mo` and a user-accessible method to read it (e.g., `getValidSymbols()`) with authenticated-user authorization and deterministic return data.",
      "reason": "While `validSymbols` is defined, the diff snippet for `backend/main.mo` does not show any public authenticated method such as `getValidSymbols()` nor the required authorization trap behavior for non-users.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-32",
      "requirement": "Implement backend watchlist persistence and mutations in `backend/main.mo` with a per-user watchlist store and an authenticated `addCryptoToWatchlist(symbol : CryptoSymbol)` method that is idempotent and rejects unsupported symbols.",
      "reason": "The diff shows a `userWatchlists` map being introduced, but does not show any `addCryptoToWatchlist` shared method, any idempotency logic, or validation against `validSymbols` with a clear English error.",
      "evidence": [
        "backend/main.mo",
        "backend/migration.mo"
      ]
    },
    {
      "id": "REQ-33",
      "requirement": "Implement a backend watchlist read endpoint in `backend/main.mo` (e.g., `getWatchlist() : async [CryptoSymbol]`) callable only by authenticated users and returning an empty list for new users.",
      "reason": "No public `getWatchlist()` (or equivalent) method is shown in the provided `backend/main.mo` diff snippet, so the required authenticated watchlist read endpoint cannot be verified as implemented.",
      "evidence": [
        "backend/main.mo"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Added an admin cycle-status API that returns emoji-marked status strings (e.g., \"✅\", \"⚠️\", \"❌\").",
      "reason": "The BuildRequest is focused on validSymbols exposure and watchlist CRUD + frontend symbol picker; it does not request adding new cycle monitoring/status endpoints or emoji-containing status text.",
      "evidence": [
        "backend/main.mo"
      ]
    }
  ],
  "confidence": 0.68,
  "changed_files": [
    "backend/main.mo",
    "backend/migration.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/AddCryptoDialog.tsx",
    "frontend/src/components/SymbolPicker.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/Dashboard.tsx",
    "project_state.json"
  ]
}