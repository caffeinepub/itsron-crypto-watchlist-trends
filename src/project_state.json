{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 5,
  "summary": "IC/Motoko crypto backend canister (itsron_crypto_backend) that fetches live market data (CoinGecko HTTP outcall) and a frontend that must correctly resolve the backend canister ID; currently troubleshooting connectivity/demo-mode and validating live market data calls.",
  "architectural_notes": [
    "Frontend depends on a cached backend canister ID (e.g., in localStorage); actor creation can stall if the cached ID is missing/wiped and auto-discovery does not run.",
    "Backend canister `itsron_crypto_backend` exposes `getLiveMarketData(symbol)` and will add a `debugFetchCoinGecko(symbol)` function that performs an HTTP outcall to the CoinGecko URL builder and returns the raw response for debugging."
  ],
  "known_issues": [
    "Clearing browser cache/cookies can wipe the cached backend canister ID, causing the app to remain stuck on “Connecting to backend” (actor never begins fetching; stage remains idle) even when Internet Identity is authenticated."
  ],
  "isFixRequest": true,
  "existing_features": [],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add a Motoko debug endpoint (debugFetchCoinGecko) to log/return raw CoinGecko HTTP response for a given crypto symbol and use it to validate getLiveMarketData for BTC/ETH/XRP via dfx calls.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add a public shared Motoko debug endpoint `debugFetchCoinGecko(symbol : CryptoSymbol) : async Text` in `backend/main.mo` that builds the CoinGecko URL for the given symbol, performs the HTTP GET outcall, prints debug logs (URL + raw response), and returns the raw response body as `Text`, matching the user-provided function behavior.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Ensure the backend canister exposes `getLiveMarketData(symbol : CryptoSymbol)` callable via `dfx canister call itsron_crypto_backend getLiveMarketData '(\"BTC\")'` / `(\"ETH\")` / `(\"XRP\")`, and that it uses the same CoinGecko URL-building logic as `debugFetchCoinGecko` so live-data failures can be debugged consistently.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Preserve the existing user-profile and authorization behavior currently implemented in `backend/main.mo` (profile getters/setter and access control mixin) while adding the new crypto debug and live-market-data functions.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Untitled request",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}